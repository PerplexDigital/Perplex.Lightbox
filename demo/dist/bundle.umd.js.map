{"version":3,"file":"bundle.umd.js","sources":["../../dist/perplex.lightbox.mjs","../src/index.js"],"sourcesContent":["/**\r\n * PerplexLightbox v1.0.3\r\n */\n\n/**\r\n * Component state\r\n */\nvar state = {\n  animFrameworks: {\n    gsap: false,\n    animejs: false\n  },\n  prevFocusElem: null,\n  ignoreFocus: false,\n  runningAnimations: {\n    container: null,\n    item: null\n  }\n};\n/**\r\n * Component functions\r\n */\n\nvar func = {\n  checkAnimationFramework: function () {\n    if (window.gsap) {\n      state.animFrameworks.gsap = true;\n    } else if (window.anime) {\n      state.animFrameworks.animejs = true;\n    }\n  },\n  killRunningAnimations: function () {\n    for (var forItem in state.runningAnimations) {\n      state.runningAnimations[forItem].kill();\n    }\n  },\n  staticAnimationCallbacks: {\n    onOpenBegin: function () {\n      this.runCallbacks(this.callbacks.onOpenBegin);\n    },\n    onOpenEnd: function () {\n      this.runCallbacks(this.callbacks.onOpenEnd);\n    },\n    onCloseBegin: function () {\n      this.runCallbacks(this.callbacks.onCloseBegin);\n    },\n    onCloseEnd: function () {\n      this.element.style.display = \"none\";\n      this.item.style.opacity = \"0\";\n      this.runCallbacks(this.callbacks.onCloseEnd);\n    }\n  }\n};\n/**\r\n * Class Lightbox\r\n */\n\nvar Lightbox = function Lightbox(elem, options) {\n  var this$1 = this;\n\n  if (elem && typeof elem !== 'object') {\n    throw new Error('Spefify an object as container');\n  }\n\n  if (elem.prevObject) {\n    elem = elem[0];\n  } // options passed\n\n\n  this.options = options || {};\n\n  if (this.options && typeof this.options !== 'object') {\n    throw new Error('Options is not an object');\n  }\n\n  this.element = elem;\n  this.item = this.element.querySelector('.js-lightboxElem');\n  this.closeButton = this.element.querySelector('.js-lightboxClose');\n  this.focusable = {\n    elements: [],\n    firstFocusable: null,\n    lastFocusable: null,\n    nextFocus: null,\n    prevFocusElem: null\n  };\n  this.callbacks = {\n    onOpenBegin: [],\n    onOpenEnd: [],\n    onCloseBegin: [],\n    onCloseEnd: []\n  }; // Animation properties\n\n  this.animationProps = {\n    duration: this.options.duration ? this.options.duration : 400,\n    item: {\n      gsapEaseOpen: this.options.gsapEaseOpen ? this.options.gsapEaseOpen : 'expo.out',\n      gsapEaseClose: this.options.gsapEaseClose ? this.options.gsapEaseClose : 'power1.in',\n      staticEaseOpen: this.options.staticEaseOpen ? this.options.staticEaseOpen : 'cubic-bezier(0.21, 0.49, 0.1, 0.99)',\n      staticEaseClose: this.options.staticEaseClose ? this.options.staticEaseClose : 'ease-in'\n    }\n  }; // gsap animatie/timeline mee kunnen geven (chasing sunsets)\n\n  this.addCallback(function () {\n    this$1.closeButton.focus();\n  }, 'onOpenBegin'); // Focus vorige element wanneer sluiten begint\n\n  this.addCallback(function () {\n    if (state.prevFocusElem) {\n      state.prevFocusElem.focus();\n    }\n  }, 'onCloseBegin');\n  this.closeOnEscape = this.closeOnEscape.bind(this);\n  this.closeOnClick = this.closeOnClick.bind(this);\n  this.trapFocus = this.trapFocus.bind(this);\n  this.close = this.close.bind(this);\n  this.getFocusableElements(); // static animations\n\n  this.static = {\n    onOpenBegin: func.staticAnimationCallbacks.onOpenBegin.bind(this),\n    onOpenEnd: func.staticAnimationCallbacks.onOpenEnd.bind(this),\n    onCloseBegin: func.staticAnimationCallbacks.onCloseBegin.bind(this),\n    onCloseEnd: func.staticAnimationCallbacks.onCloseEnd.bind(this)\n  };\n}; // open / close\n\n\nLightbox.prototype.open = function open () {\n  // store previously focussed item\n  state.prevFocusElem = document.activeElement; // apply close events (close on escape, etc)\n\n  this.addListeners(); // open the lightbox with GSAP\n\n  if (state.animFrameworks.gsap) {\n    state.runningAnimations.container = gsap.to(this.element, this.animationProps.duration / 1000, {\n      opacity: 1,\n      display: \"block\"\n    });\n    state.runningAnimations.item = gsap.fromTo(this.item, this.animationProps.duration / 1000, {\n      scale: 0.9,\n      opacity: 0\n    }, {\n      scale: 1,\n      opacity: 1,\n      ease: this.animationProps.item.gsapEaseOpen,\n      onStart: this.runCallbacks,\n      onStartParams: [this.callbacks.onOpenBegin],\n      onComplete: this.runCallbacks,\n      onCompleteParams: [this.callbacks.onOpenEnd]\n    });\n  } else {\n    this.element.style.display = \"block\";\n    this.element.style.animation = \"containerShow \" + (this.animationProps.duration / 1000) + \"s forwards\";\n    this.item.style.animation = \"itemShow \" + (this.animationProps.duration / 1000) + \"s \" + (this.animationProps.item.staticEaseOpen) + \" forwards\";\n  }\n};\n\nLightbox.prototype.close = function close () {\n  this.removeListeners();\n\n  if (state.animFrameworks.gsap) {\n    func.killRunningAnimations();\n    state.runningAnimations.container = gsap.to(this.element, this.animationProps.duration / 1500, {\n      opacity: 0,\n      display: \"none\"\n    });\n    state.runningAnimations.item = gsap.to(this.item, this.animationProps.duration / 1500, {\n      scale: 0.95,\n      opacity: 0,\n      ease: this.animationProps.item.gsapEaseClose,\n      onStart: this.runCallbacks,\n      onStartParams: [this.callbacks.onCloseBegin],\n      onComplete: this.runCallbacks,\n      onCompleteParams: [this.callbacks.onCloseEnd]\n    });\n  } else {\n    this.element.style.animation = \"containerHide \" + (this.animationProps.duration / 1500) + \"s forwards\";\n    this.item.style.animation = \"itemHide \" + (this.animationProps.duration / 1500) + \"s \" + (this.animationProps.item.staticEaseClose) + \" forwards\";\n  }\n}; // Callbacks\n\n\nLightbox.prototype.addCallback = function addCallback (callback, moment) {\n  if (typeof callback !== 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (moment && typeof moment !== 'string') {\n    throw new Error('moment must be a string');\n  }\n\n  moment = moment || 'onCloseEnd';\n\n  if (moment !== 'onOpenBegin' && moment !== 'onOpenEnd' && moment !== 'onCloseBegin' && moment !== 'onCloseEnd') {\n    throw new Error(\"moment must be either 'onOpenBegin', 'onOpenEnd', 'onCloseBegin', 'onCloseEnd'\");\n  }\n\n  this.callbacks[moment].push(callback);\n};\n\nLightbox.prototype.runCallbacks = function runCallbacks (callbackArr) {\n  for (var i = 0, list = callbackArr; i < list.length; i += 1) {\n    var callback = list[i];\n\n      callback(this);\n  }\n}; // Focus within lightbox\n\n\nLightbox.prototype.getFocusableElements = function getFocusableElements () {\n  this.focusable = this.element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n  this.focusable.firstFocusable = this.focusable[0];\n  this.focusable.lastFocusable = this.focusable[this.focusable.length - 1];\n};\n\nLightbox.prototype.trapFocus = function trapFocus (e) {\n  if (e.key === 'Tab' || e.keyCode === 9) {\n    if (e.shiftKey) {\n      if (document.activeElement === this.focusable.firstFocusable) {\n        this.focusable.lastFocusable.focus();\n        e.preventDefault();\n      }\n    } else {\n      if (document.activeElement === this.focusable.lastFocusable) {\n        this.focusable.firstFocusable.focus();\n        e.preventDefault();\n      }\n    }\n  }\n}; // Event listeners\n\n\nLightbox.prototype.addListeners = function addListeners () {\n  document.addEventListener('keyup', this.closeOnEscape);\n  document.addEventListener('keydown', this.trapFocus, true);\n  this.closeButton.addEventListener('click', this.close);\n  this.element.addEventListener('click', this.closeOnClick); // Static animations\n\n  if (!state.animFrameworks.gsap) {\n    this.element.removeEventListener('animationstart', this.static.onCloseBegin);\n    this.element.removeEventListener('animationend', this.static.onCloseEnd);\n    this.element.addEventListener('animationstart', this.static.onOpenBegin);\n    this.element.addEventListener('animationend', this.static.onOpenEnd);\n  }\n};\n\nLightbox.prototype.removeListeners = function removeListeners () {\n  document.removeEventListener('keyup', this.closeOnEscape);\n  document.removeEventListener('keydown', this.trapFocus, true);\n  this.closeButton.removeEventListener('click', this.close);\n  this.element.removeEventListener('click', this.closeOnClick); // Static animations\n\n  if (!state.animFrameworks.gsap) {\n    this.element.removeEventListener('animationstart', this.static.onOpenBegin);\n    this.element.removeEventListener('animationend', this.static.onOpenEnd);\n    this.element.addEventListener('animationstart', this.static.onCloseBegin);\n    this.element.addEventListener('animationend', this.static.onCloseEnd);\n  }\n};\n\nLightbox.prototype.closeOnEscape = function closeOnEscape (e) {\n  if (e.key == 'Escape') {\n    this.close();\n  }\n};\n\nLightbox.prototype.closeOnClick = function closeOnClick (e) {\n  if (!e.target.closest(\".js-lightboxElem\")) {\n    this.close();\n  }\n}; // acties toevoegen als .on(\"close\", funciton...) zodat er bijvoorbeeld analytics events meegegeven worden.\n\n/**\r\n * Functions to execute on initialization\r\n */\n\n\nfunction onInit() {\n  func.checkAnimationFramework();\n  polyfills();\n}\n\nfunction polyfills() {\n  // closest\n  if (!Element.prototype.matches) {\n    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n  }\n\n  if (!Element.prototype.closest) {\n    Element.prototype.closest = function (s) {\n      var el = this;\n\n      do {\n        if (el.matches(s)) { return el; }\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n\n      return null;\n    };\n  }\n}\n\nonInit();\n\nexport default Lightbox;\n","import Lightbox from '../../dist/perplex.lightbox';\r\n\r\nvar lightboxElem = $(\".js-lightbox\");\r\nvar myLightbox = new Lightbox(lightboxElem);\r\n\r\nwindow.PerplexLightbox = Lightbox;\r\n\r\n$(\".js-triggerBox\").on(\"click\", function() {\r\n\tmyLightbox.open();\r\n});"],"names":["state","animFrameworks","gsap","animejs","prevFocusElem","ignoreFocus","runningAnimations","container","item","func","checkAnimationFramework","window","anime","killRunningAnimations","forItem","kill","staticAnimationCallbacks","onOpenBegin","this","runCallbacks","callbacks","onOpenEnd","onCloseBegin","onCloseEnd","element","style","display","opacity","Lightbox","elem","options","this$1","Error","prevObject","querySelector","closeButton","focusable","elements","firstFocusable","lastFocusable","nextFocus","animationProps","duration","gsapEaseOpen","gsapEaseClose","staticEaseOpen","staticEaseClose","addCallback","focus","closeOnEscape","bind","closeOnClick","trapFocus","close","getFocusableElements","prototype","open","document","activeElement","addListeners","to","fromTo","scale","ease","onStart","onStartParams","onComplete","onCompleteParams","animation","removeListeners","callback","moment","push","callbackArr","i","list","length","querySelectorAll","e","key","keyCode","shiftKey","preventDefault","addEventListener","removeEventListener","target","closest","Element","matches","msMatchesSelector","webkitMatchesSelector","s","el","parentElement","parentNode","nodeType","myLightbox","$","PerplexLightbox","on"],"mappings":"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"}