!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){var t={animFrameworks:{gsap:!1,animejs:!1},prevFocusElem:null,ignoreFocus:!1,runningAnimations:{container:null,item:null}},e={checkAnimationFramework:function(){window.gsap?t.animFrameworks.gsap=!0:window.anime&&(t.animFrameworks.animejs=!0)},killRunningAnimations:function(){for(var e in t.runningAnimations)t.runningAnimations[e].kill()},staticAnimationCallbacks:{onOpenBegin:function(){this.runCallbacks(this.callbacks.onOpenBegin)},onOpenEnd:function(){this.runCallbacks(this.callbacks.onOpenEnd)},onCloseBegin:function(){this.runCallbacks(this.callbacks.onCloseBegin)},onCloseEnd:function(){this.element.style.display="none",this.item.style.opacity="0",this.runCallbacks(this.callbacks.onCloseEnd)}}},n=function(n,s){var i=this;if(n&&"object"!=typeof n)throw new Error("Spefify an object as container");if(n.prevObject&&(n=n[0]),this.options=s||{},this.options&&"object"!=typeof this.options)throw new Error("Options is not an object");this.element=n,this.item=this.element.querySelector(".js-lightboxElem"),this.closeButton=this.element.querySelector(".js-lightboxClose"),this.focusable={elements:[],firstFocusable:null,lastFocusable:null,nextFocus:null,prevFocusElem:null},this.callbacks={onOpenBegin:[],onOpenEnd:[],onCloseBegin:[],onCloseEnd:[]},this.animationProps={duration:this.options.duration?this.options.duration:400,item:{gsapEaseOpen:this.options.gsapEaseOpen?this.options.gsapEaseOpen:"expo.out",gsapEaseClose:this.options.gsapEaseClose?this.options.gsapEaseClose:"power1.in",staticEaseOpen:this.options.staticEaseOpen?this.options.staticEaseOpen:"cubic-bezier(0.21, 0.49, 0.1, 0.99)",staticEaseClose:this.options.staticEaseClose?this.options.staticEaseClose:"ease-in"}},this.addCallback(function(){i.closeButton.focus()},"onOpenBegin"),this.addCallback(function(){t.prevFocusElem&&t.prevFocusElem.focus()},"onCloseBegin"),this.closeOnEscape=this.closeOnEscape.bind(this),this.closeOnClick=this.closeOnClick.bind(this),this.trapFocus=this.trapFocus.bind(this),this.close=this.close.bind(this),this.getFocusableElements(),this.static={onOpenBegin:e.staticAnimationCallbacks.onOpenBegin.bind(this),onOpenEnd:e.staticAnimationCallbacks.onOpenEnd.bind(this),onCloseBegin:e.staticAnimationCallbacks.onCloseBegin.bind(this),onCloseEnd:e.staticAnimationCallbacks.onCloseEnd.bind(this)}};n.prototype.open=function(){t.prevFocusElem=document.activeElement,this.addListeners(),t.animFrameworks.gsap?(t.runningAnimations.container=gsap.to(this.element,this.animationProps.duration/1e3,{opacity:1,display:"block"}),t.runningAnimations.item=gsap.fromTo(this.item,this.animationProps.duration/1e3,{scale:.9,opacity:0},{scale:1,opacity:1,ease:this.animationProps.item.gsapEaseOpen,onStart:this.runCallbacks,onStartParams:[this.callbacks.onOpenBegin],onComplete:this.runCallbacks,onCompleteParams:[this.callbacks.onOpenEnd]})):(this.element.style.display="block",this.element.style.animation="containerShow "+this.animationProps.duration/1e3+"s forwards",this.item.style.animation="itemShow "+this.animationProps.duration/1e3+"s "+this.animationProps.item.staticEaseOpen+" forwards")},n.prototype.close=function(){this.removeListeners(),t.animFrameworks.gsap?(e.killRunningAnimations(),t.runningAnimations.container=gsap.to(this.element,this.animationProps.duration/1500,{opacity:0,display:"none"}),t.runningAnimations.item=gsap.to(this.item,this.animationProps.duration/1500,{scale:.95,opacity:0,ease:this.animationProps.item.gsapEaseClose,onStart:this.runCallbacks,onStartParams:[this.callbacks.onCloseBegin],onComplete:this.runCallbacks,onCompleteParams:[this.callbacks.onCloseEnd]})):(this.element.style.animation="containerHide "+this.animationProps.duration/1500+"s forwards",this.item.style.animation="itemHide "+this.animationProps.duration/1500+"s "+this.animationProps.item.staticEaseClose+" forwards")},n.prototype.addCallback=function(t,e){if("function"!=typeof t)throw new Error("callback must be a function");if(e&&"string"!=typeof e)throw new Error("moment must be a string");if("onOpenBegin"!==(e=e||"onCloseEnd")&&"onOpenEnd"!==e&&"onCloseBegin"!==e&&"onCloseEnd"!==e)throw new Error("moment must be either 'onOpenBegin', 'onOpenEnd', 'onCloseBegin', 'onCloseEnd'");this.callbacks[e].push(t)},n.prototype.runCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1)(0,n[e])(this)},n.prototype.getFocusableElements=function(){this.focusable=this.element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),this.focusable.firstFocusable=this.focusable[0],this.focusable.lastFocusable=this.focusable[this.focusable.length-1]},n.prototype.trapFocus=function(t){"Tab"!==t.key&&9!==t.keyCode||(t.shiftKey?document.activeElement===this.focusable.firstFocusable&&(this.focusable.lastFocusable.focus(),t.preventDefault()):document.activeElement===this.focusable.lastFocusable&&(this.focusable.firstFocusable.focus(),t.preventDefault()))},n.prototype.addListeners=function(){document.addEventListener("keyup",this.closeOnEscape),document.addEventListener("keydown",this.trapFocus,!0),this.closeButton.addEventListener("click",this.close),this.element.addEventListener("click",this.closeOnClick),t.animFrameworks.gsap||(this.element.removeEventListener("animationstart",this.static.onCloseBegin),this.element.removeEventListener("animationend",this.static.onCloseEnd),this.element.addEventListener("animationstart",this.static.onOpenBegin),this.element.addEventListener("animationend",this.static.onOpenEnd))},n.prototype.removeListeners=function(){document.removeEventListener("keyup",this.closeOnEscape),document.removeEventListener("keydown",this.trapFocus,!0),this.closeButton.removeEventListener("click",this.close),this.element.removeEventListener("click",this.closeOnClick),t.animFrameworks.gsap||(this.element.removeEventListener("animationstart",this.static.onOpenBegin),this.element.removeEventListener("animationend",this.static.onOpenEnd),this.element.addEventListener("animationstart",this.static.onCloseBegin),this.element.addEventListener("animationend",this.static.onCloseEnd))},n.prototype.closeOnEscape=function(t){"Escape"==t.key&&this.close()},n.prototype.closeOnClick=function(t){t.target.closest(".js-lightboxElem")||this.close()},e.checkAnimationFramework(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var s=new n($(".js-lightbox"));window.PerplexLightbox=n,$(".js-triggerBox").on("click",function(){s.open()})});
//# sourceMappingURL=bundle.umd.js.map
